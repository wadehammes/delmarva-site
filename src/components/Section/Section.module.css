.sectionContent {
  display: grid;
  grid-template-columns: repeat(var(--columns, 1), 1fr);
  grid-column: 1 / -1;
  gap: 2rem;
  align-items: center;
  width: 100%;

  /* Allow grid items to shrink inside columns (prevents overflow for carousels/media) */
  > * {
    min-width: 0;
  }

  @media screen and (min-width: 1000px) {
    grid-template-columns: repeat(var(--columns-md, var(--columns, 1)), 1fr);
  }

  @media screen and (min-width: 1440px) {
    grid-template-columns: repeat(
        var(--columns-lg, var(--columns-md, var(--columns, 1))),
        1fr
      );
  }

  &.topAligned {
    align-items: flex-start;
  }

  &.bottomAligned {
    align-items: flex-end;
  }

  &.stretchAligned {
    align-items: stretch;
  }

  &.noGap {
    gap: 0;
  }

  &.moreGap {
    gap: 4rem;
  }

  &.contained:not(.singleColumn) {
    padding: 0;

    @media screen and (min-width: 900px) {
      grid-column: 2 / -2;
    }
  }

  &.contained,
  &.singleColumn {
    grid-column: 1 / -1;

    @media screen and (min-width: 900px) {
      grid-column: 2 / -2;
    }

    &.right {
      grid-column: 1 / -1;

      @media screen and (min-width: 900px) {
        grid-column: 2 / -1;
      }
    }

    &.left {
      grid-column: 1 / -1;

      @media screen and (min-width: 900px) {
        grid-column: 1 / -2;
      }
    }
  }

  /* Legacy class support - can be removed once components are updated */
  &.twoColumn {
    --columns: 1;
    --columns-md: 2;
  }

  &.threeColumn {
    --columns: 1;
    --columns-md: 1;
    --columns-lg: 3;
  }

  &.fourColumn {
    --columns: 1;
    --columns-md: 4;
  }

  &.fiveColumn {
    --columns: 1;
    --columns-md: 3;
    --columns-lg: 5;
  }

  &.sixColumn {
    --columns: 2;
    --columns-md: 3;
    --columns-lg: 6;
  }

  &[class*="Column"] {
    align-items: stretch;
  }
}

.section {
  z-index: 1;
  display: grid;
  grid-template-columns: repeat(var(--grid-columns), 1fr);
  gap: 0;
  width: 100%;
  padding: 4rem 2rem;
  background-color: var(--color-bg);

  &.blueprintBg {
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.05) 2px, transparent 2px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.05) 2px, transparent 2px),
      linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
    background-position:
      -2px -2px,
      -2px -2px,
      -1px -1px,
      -1px -1px;
    background-size:
      100px 100px,
      100px 100px,
      20px 20px,
      20px 20px;
    border-top: 2px solid rgba(255, 255, 255, 0.01);
  }

  &.microdotBg {
    --dot-color: color-mix(in srgb, var(--dot-bg) 80%, var(--colors-white));
    --dot-size: 1px;
    --dot-space: 5px;
    background:
      linear-gradient(
        90deg,
        var(--dot-bg) calc(var(--dot-space) - var(--dot-size)),
        transparent 1%
      )
      center / var(--dot-space) var(--dot-space),
      linear-gradient(
        var(--dot-bg) calc(var(--dot-space) - var(--dot-size)),
        transparent 1%
      )
      center / var(--dot-space) var(--dot-space),
      var(--dot-color);
  }

  &.overlap > .sectionContent {
    padding: 2rem;
    margin-top: -8rem;
    color: var(--color-text);
    background-color: color-mix(in srgb, var(--color-bg) 80%, #000);
    border-radius: 10px;
  }

  &.lessPadding {
    padding: 2rem;
  }

  &.morePadding {
    padding-top: 4rem;
    padding-bottom: 4rem;

    @media screen and (min-width: 1000px) {
      padding-top: 8rem;
      padding-bottom: 8rem;
    }
  }

  &.moreTopPadding {
    padding-top: 4rem;

    @media screen and (min-width: 1000px) {
      padding-top: 8rem;
    }
  }

  &.lessTopPadding {
    padding-top: 2rem;
  }

  &.moreBottomPadding {
    padding-bottom: 4rem;

    @media screen and (min-width: 1000px) {
      padding-bottom: 8rem;
    }
  }

  &.lessBottomPadding {
    padding-bottom: 2rem;
  }

  &.noPadding {
    padding: 0;
  }

  &.noTopPadding {
    padding-top: 0;
  }

  &.noBottomPadding {
    padding-bottom: 0;
  }

  &.fullWidth {
    padding-right: 0;
    padding-left: 0;
  }

  &.whiteBg {
    --color-text: var(--colors-black);
    background-color: var(--colors-white);
  }

  &.blackBg {
    --color-text: var(--colors-white);
    --dot-size: 1px;
    --dot-space: 6px;
    background-color: var(--colors-black);
    background-image: radial-gradient(
      circle at center,
      rgba(255, 255, 255, 0.055) var(--dot-size),
      transparent var(--dot-size)
    );
    background-position: center;
    background-size: var(--dot-space) var(--dot-space);

    &.fullWidth {
      padding-bottom: 2rem;
    }
  }

  &.silverBg {
    --color-text: var(--colors-black);
    background-color: var(--colors-silver);
  }

  &.redBg {
    --color-text: var(--colors-white);
    background-color: var(--colors-red);
  }

  @media screen and (min-width: 900px) {
    padding-right: 0;
    padding-left: 0;
  }
}

.sectionEyebrow {
  position: relative;
  width: 100%;
  margin-bottom: 2rem;
  font-size: 0.75rem;
  font-weight: 400;
  text-align: left;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &::after {
    position: absolute;
    bottom: 0.4rem;
    left: 0;
    z-index: 0;
    width: 100%;
    height: 1px;
    content: "";
    background-color: var(--divider);
  }
}

.sectionEyebrowText {
  position: relative;
  z-index: 1;
  display: inline-block;
  padding-right: 1rem;
  color: var(--color-text);
  background-color: var(--color-bg);
}

.sectionHeaderEyebrow {
  display: flex;
  flex-flow: column nowrap;
  grid-column: 1 / -1;
  gap: var(--default-padding);
  align-items: center;
  justify-content: center;
  width: 100%;
  text-align: center;

  @media screen and (min-width: 900px) {
    grid-column: 2 / -1;
  }

  &.left {
    justify-content: flex-start;
    text-align: left;
  }

  &.right {
    justify-content: flex-end;
    text-align: right;
  }
}

.sectionHeader {
  display: flex;
  grid-column: 1 / -1;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 76ch;
  margin: 0 auto;
  text-align: center;
  text-wrap: balance;

  &.hasSectionContent {
    padding-bottom: 4rem;
  }
}

.sectionHeader + *:has(.sectionContent) {
  padding-top: 2rem;
}

.sectionEndCta {
  display: flex;
  grid-column: 1 / -1;
  justify-content: center;
  margin-top: 2rem;

  @media (min-width: 900px) {
    margin-top: 4rem;
  }
}

.sectionSeparator {
  display: flex;
  grid-column: 1 / -1;
  align-items: center;
  justify-content: center;

  &:after {
    display: block;
    margin: 0.35em 0 1em 0;
    font-size: 1.5em;
    color: var(--colors-red);
    text-align: center;
    content: "▴ ▼ ▴";
  }
}
